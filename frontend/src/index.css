@tailwind base;
@tailwind components;
@tailwind utilities;

:root {
    --primary: #6366f1;
    --primary-light: #818cf8;
    --primary-dark: #4f46e5;
    --glass-bg: rgba(255, 255, 255, 0.08);
    --glass-border: rgba(255, 255, 255, 0.15);
    --glass-blur: 20px;
}

* {
    box-sizing: border-box;
}

html {
    scroll-behavior: smooth;
}

body {
    margin: 0;
    padding: 0;
    font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
    background: linear-gradient(135deg, #1e1b4b 0%, #312e81 50%, #1e1b4b 100%);
    min-height: 100vh;
    color: white;
}

#root {
    min-height: 100vh;
}

/* Glassmorphism utilities */
@layer components {
    .glass {
        background: var(--glass-bg);
        backdrop-filter: blur(var(--glass-blur));
        -webkit-backdrop-filter: blur(var(--glass-blur));
        border: 1px solid var(--glass-border);
        border-radius: 16px;
    }

    .glass-card {
        background: rgba(255, 255, 255, 0.05);
        backdrop-filter: blur(20px);
        -webkit-backdrop-filter: blur(20px);
        border: 1px solid rgba(255, 255, 255, 0.1);
        border-radius: 16px;
        transition: all 0.3s ease;
    }

    .glass-card:hover {
        background: rgba(255, 255, 255, 0.08);
        border-color: rgba(255, 255, 255, 0.2);
        transform: translateY(-2px);
    }

    .glass-button {
        background: linear-gradient(135deg, rgba(99, 102, 241, 0.8) 0%, rgba(79, 70, 229, 0.8) 100%);
        backdrop-filter: blur(10px);
        border: 1px solid rgba(255, 255, 255, 0.2);
        border-radius: 12px;
        color: white;
        font-weight: 500;
        padding: 12px 24px;
        cursor: pointer;
        transition: all 0.3s ease;
    }

    .glass-button:hover {
        background: linear-gradient(135deg, rgba(99, 102, 241, 1) 0%, rgba(79, 70, 229, 1) 100%);
        transform: translateY(-2px);
        box-shadow: 0 10px 40px rgba(99, 102, 241, 0.3);
    }

    .glass-button:disabled {
        opacity: 0.5;
        cursor: not-allowed;
        transform: none;
    }

    .glass-input {
        background: rgba(255, 255, 255, 0.05);
        backdrop-filter: blur(10px);
        border: 1px solid rgba(255, 255, 255, 0.1);
        border-radius: 12px;
        color: white;
        padding: 12px 16px;
        width: 100%;
        transition: all 0.3s ease;
        outline: none;
    }

    .glass-input::placeholder {
        color: rgba(255, 255, 255, 0.7);
        /* Increased to 0.7 for WCAG AA contrast (~9.2:1) */
    }

    .glass-input:focus {
        border-color: rgba(99, 102, 241, 0.5);
        box-shadow: 0 0 20px rgba(99, 102, 241, 0.2);
    }

    .glass-sidebar {
        background: rgba(30, 27, 75, 0.8);
        backdrop-filter: blur(20px);
        border-right: 1px solid rgba(255, 255, 255, 0.1);
    }

    .glow-effect {
        box-shadow: 0 0 60px rgba(99, 102, 241, 0.4);
    }

    .text-gradient {
        background: linear-gradient(135deg, #fff 0%, #a5b4fc 100%);
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
        background-clip: text;
    }

    /* Status badges - WCAG AA compliant contrast (4.5:1+ on dark backgrounds) */
    .status-open {
        background: rgba(239, 68, 68, 0.25);
        color: #fecaca;
        /* Lighter red for better contrast */
        border: 1px solid rgba(239, 68, 68, 0.4);
    }

    .status-in_progress {
        background: rgba(245, 158, 11, 0.25);
        color: #fde68a;
        /* Brighter yellow for better contrast */
        border: 1px solid rgba(245, 158, 11, 0.4);
    }

    .status-closed {
        background: rgba(34, 197, 94, 0.25);
        color: #bbf7d0;
        /* Brighter green for better contrast */
        border: 1px solid rgba(34, 197, 94, 0.4);
    }

    /* Professional Government Glassmorphism - Refined Sections */
    .glass-section {
        background: rgba(30, 41, 59, 0.65);
        backdrop-filter: blur(12px);
        -webkit-backdrop-filter: blur(12px);
        border: 1px solid rgba(255, 255, 255, 0.08);
        border-radius: 12px;
        transition: all 0.2s ease;
    }

    .glass-section:hover {
        border-color: rgba(255, 255, 255, 0.12);
    }

    /* Premium Header Bar */
    .glass-header {
        background: rgba(30, 41, 59, 0.85);
        backdrop-filter: blur(20px);
        -webkit-backdrop-filter: blur(20px);
        border-bottom: 1px solid rgba(255, 255, 255, 0.08);
    }

    /* Refined Status Buttons */
    .status-btn {
        transition: all 0.2s ease;
        border-radius: 8px;
        font-weight: 500;
    }

    .status-btn:hover:not(.status-btn-active) {
        transform: translateY(-1px);
    }

    .status-btn-active {
        box-shadow: 0 4px 16px rgba(0, 0, 0, 0.2);
    }

    /* Timeline Dot Animation */
    .timeline-dot {
        position: relative;
    }

    .timeline-dot::after {
        content: '';
        position: absolute;
        inset: -2px;
        border-radius: 50%;
        background: currentColor;
        opacity: 0.3;
        animation: pulse 2s ease-in-out infinite;
    }

    @keyframes pulse {

        0%,
        100% {
            transform: scale(1);
            opacity: 0.3;
        }

        50% {
            transform: scale(1.5);
            opacity: 0;
        }
    }
}

/* Scrollbar styling */
::-webkit-scrollbar {
    width: 8px;
    height: 8px;
}

::-webkit-scrollbar-track {
    background: rgba(255, 255, 255, 0.05);
    border-radius: 4px;
}

::-webkit-scrollbar-thumb {
    background: rgba(255, 255, 255, 0.2);
    border-radius: 4px;
}

::-webkit-scrollbar-thumb:hover {
    background: rgba(255, 255, 255, 0.3);
}

/* Mobile-specific styles */
@media (max-width: 768px) {
    .glass-button {
        padding: 14px 28px;
        min-height: 48px;
    }

    .glass-input {
        padding: 14px 16px;
        min-height: 48px;
        font-size: 16px;
        /* Prevent zoom on iOS */
    }
}

/* Animation utilities */
@keyframes fadeInUp {
    from {
        opacity: 0;
        transform: translateY(20px);
    }

    to {
        opacity: 1;
        transform: translateY(0);
    }
}

.animate-fade-in-up {
    animation: fadeInUp 0.5s ease-out forwards;
}

.animate-delay-100 {
    animation-delay: 100ms;
}

.animate-delay-200 {
    animation-delay: 200ms;
}

.animate-delay-300 {
    animation-delay: 300ms;
}

/* ========================================
   WCAG AA CONTRAST OVERRIDES
   Override Tailwind opacity text colors that fail 4.5:1
   ======================================== */

/* 
 * Background: #1e1b4b (dark indigo) RGB(30, 27, 75)
 * Contrast ratio requirements: 4.5:1 for normal text, 3:1 for large text
 * 
 * White opacity contrast calculations on #1e1b4b:
 * - 100% (#ffffff) = 15.8:1 ✓
 * - 80%  (#ffffffcc) = 11.9:1 ✓  
 * - 70%  (#ffffffb3) = 9.2:1 ✓
 * - 60%  (#ffffff99) = 6.5:1 ✓ (but close to minimum)
 * - 50%  (#ffffff80) = 4.3:1 ✗ FAILS
 * - 40%  (#ffffff66) = 2.9:1 ✗ FAILS
 * 
 * Fix: Increase minimum opacity to ensure 7:1+ for better accessibility
 */

/* Override low-contrast text colors */
.text-white\/30 {
    color: rgba(255, 255, 255, 0.7) !important;
    /* Was 0.3, increased to 0.7 for WCAG AA */
}

.text-white\/40 {
    color: rgba(255, 255, 255, 0.7) !important;
    /* Was 0.4, increased to 0.7 for WCAG AA */
}

.text-white\/50 {
    color: rgba(255, 255, 255, 0.75) !important;
    /* Was 0.5, increased to 0.75 for WCAG AA */
}

.text-white\/60 {
    color: rgba(255, 255, 255, 0.8) !important;
    /* Was 0.6, increased to 0.8 for better contrast (11.9:1) */
}

/* Ensure muted UI text has sufficient contrast */
.text-gray-400,
.text-slate-400 {
    color: rgb(156, 163, 175) !important;
    /* #9ca3af - 4.6:1 on dark backgrounds */
}

.text-gray-500,
.text-slate-500 {
    color: rgb(156, 163, 175) !important;
    /* Override to lighter shade for contrast */
}

/* Primary color text overrides for darker backgrounds */
.text-primary-300 {
    color: rgb(199, 210, 254) !important;
    /* #c7d2fe (primary-200) - brighter for better contrast */
}

.text-primary-400\/70 {
    color: rgba(165, 180, 252, 0.85) !important;
    /* Increase opacity for better contrast */
}

/* ========================================
   ADA ACCESSIBILITY STYLES
   WCAG 2.1 AA Compliance
   ======================================== */

/* Skip Link - WCAG 2.4.1 Bypass Blocks */
.skip-link {
    position: absolute;
    top: -100px;
    left: 50%;
    transform: translateX(-50%);
    background: #4f46e5;
    color: white;
    padding: 12px 24px;
    border-radius: 0 0 8px 8px;
    font-weight: 600;
    z-index: 10000;
    text-decoration: none;
    transition: top 0.2s ease;
}

.skip-link:focus {
    top: 0;
    outline: 3px solid #fbbf24;
    outline-offset: 2px;
}

/* Screen Reader Only - Hidden but accessible */
.sr-only {
    position: absolute;
    width: 1px;
    height: 1px;
    padding: 0;
    margin: -1px;
    overflow: hidden;
    clip: rect(0, 0, 0, 0);
    white-space: nowrap;
    border: 0;
}

/* Make sr-only content visible when focused (for skip links) */
.sr-only-focusable:focus,
.sr-only-focusable:active {
    position: static;
    width: auto;
    height: auto;
    padding: inherit;
    margin: inherit;
    overflow: visible;
    clip: auto;
    white-space: normal;
}

/* Enhanced Focus Indicators - WCAG 2.4.7 Focus Visible */
/* 3:1 contrast ratio minimum for focus indicators */
*:focus-visible {
    outline: 3px solid #fbbf24;
    outline-offset: 2px;
}

/* Remove default outline on mouse click but keep for keyboard */
*:focus:not(:focus-visible) {
    outline: none;
}

/* Ensure hidden action buttons are visible when focused via keyboard */
/* This enables keyboard users to see & activate buttons that are normally hover-only */
.opacity-0:focus-visible,
.group:focus-within .opacity-0,
.group:has(:focus-visible) .opacity-0 {
    opacity: 1 !important;
}

/* Button focus states */
button:focus-visible,
[role="button"]:focus-visible,
a:focus-visible {
    outline: 3px solid #fbbf24;
    outline-offset: 2px;
    box-shadow: 0 0 0 6px rgba(251, 191, 36, 0.25);
}

/* Input focus - already has styling, enhance for accessibility */
.glass-input:focus-visible {
    outline: 3px solid #fbbf24;
    outline-offset: 2px;
    border-color: #fbbf24;
}

/* Reduced Motion - WCAG 2.3.3 */
@media (prefers-reduced-motion: reduce) {

    *,
    *::before,
    *::after {
        animation-duration: 0.01ms !important;
        animation-iteration-count: 1 !important;
        transition-duration: 0.01ms !important;
        scroll-behavior: auto !important;
    }

    .glass-card:hover,
    .glass-button:hover {
        transform: none !important;
    }
}

/* High Contrast Mode Support */
@media (prefers-contrast: more) {
    :root {
        --glass-bg: rgba(0, 0, 0, 0.9);
        --glass-border: rgba(255, 255, 255, 0.5);
    }

    .glass-card,
    .glass-button,
    .glass-input {
        border-width: 2px;
        border-color: white;
    }

    .status-open,
    .status-in_progress,
    .status-closed {
        border-width: 2px;
    }
}

/* Required Field Indicator */
.required-indicator {
    color: #ef4444;
    margin-left: 4px;
}

/* Accessible error messages - WCAG AA 4.5:1 contrast */
.error-message {
    color: #fecaca;
    /* Increased brightness for better contrast */
    font-size: 0.875rem;
    margin-top: 4px;
}

.error-message::before {
    content: "⚠ ";
}

/* Link underlines for accessibility */
a:not(.skip-link):not([class*="btn"]):not([class*="button"]) {
    text-decoration: underline;
    text-underline-offset: 2px;
}

a:not(.skip-link):not([class*="btn"]):not([class*="button"]):hover {
    text-decoration-thickness: 2px;
}

/* Disabled state - ensure sufficient contrast */
[disabled],
[aria-disabled="true"] {
    opacity: 0.6;
    cursor: not-allowed;
}

/* Live region styling */
[aria-live] {
    position: absolute;
    left: -10000px;
    width: 1px;
    height: 1px;
    overflow: hidden;
}

/* Keyboard navigation indicator for lists */
[role="listbox"] [role="option"]:focus,
[role="list"] [role="listitem"]:focus {
    outline: 2px solid #fbbf24;
    outline-offset: -2px;
    background: rgba(251, 191, 36, 0.1);
}

/* Table accessibility */
table[role="grid"] th,
table[role="grid"] td {
    padding: 8px 12px;
}

table[role="grid"] th {
    background: rgba(255, 255, 255, 0.1);
    font-weight: 600;
}

table[role="grid"] tr:focus-within {
    outline: 2px solid #fbbf24;
    outline-offset: -2px;
}

/* Dialog/Modal accessibility overlay */
[role="dialog"][aria-modal="true"] {
    /* Ensure proper stacking */
    z-index: 1000;
}

/* Ensure clickable elements have minimum touch target - WCAG 2.5.5 */
/* Note: For checkboxes/radios, the touch target is achieved via label padding, not element size */
button:not(.inline-btn),
[role="button"]:not(.inline-btn),
select {
    min-height: 44px;
}

/* Links need min touch target only when standalone, not inline */
a:not(p a):not(li a):not(td a):not(span a):not(.inline-link) {
    min-height: 44px;
    display: inline-flex;
    align-items: center;
}

/* Checkboxes/radios: use wrapper padding for touch target, not element size */
input[type="checkbox"],
input[type="radio"] {
    /* Don't force min-width/height on the visual element */
    min-height: auto;
    min-width: auto;
    /* Ensure adequate size but not oversized */
    width: 18px;
    height: 18px;
    cursor: pointer;
}

/* Ensure checkbox/radio labels have adequate touch area */
/* Using flex (not inline-flex) to preserve block-level flow for vertical stacking */
label:has(input[type="checkbox"]),
label:has(input[type="radio"]) {
    min-height: 44px;
    display: flex;
    align-items: center;
    gap: 8px;
    cursor: pointer;
}

/* Exception for inline links */
p a,
li a,
td a,
span a,
.inline-link {
    min-height: auto;
    min-width: auto;
    display: inline;
}

/* Progress indicators accessibility */
[role="progressbar"] {
    position: relative;
}

[role="progressbar"]::after {
    content: attr(aria-valuenow) "%";
    position: absolute;
    left: 50%;
    transform: translateX(-50%);
    font-size: 0.75rem;
}

/* ========================================
   RTL (Right-to-Left) Language Support
   Arabic, Hebrew, Persian, Urdu, etc.
   ======================================== */

/* Base RTL styles when dir="rtl" is set on html */
html[dir="rtl"] {
    direction: rtl;
}

/* Sidebar adjustments for RTL */
html.rtl .glass-sidebar {
    border-right: none;
    border-left: 1px solid rgba(255, 255, 255, 0.1);
}

/* Flex direction fixes for RTL */
html.rtl .flex-row {
    flex-direction: row-reverse;
}

/* Icon margins - swap left/right */
html.rtl .ml-2 {
    margin-left: 0;
    margin-right: 0.5rem;
}

html.rtl .ml-3 {
    margin-left: 0;
    margin-right: 0.75rem;
}

html.rtl .ml-4 {
    margin-left: 0;
    margin-right: 1rem;
}

html.rtl .mr-2 {
    margin-right: 0;
    margin-left: 0.5rem;
}

html.rtl .mr-3 {
    margin-right: 0;
    margin-left: 0.75rem;
}

html.rtl .mr-4 {
    margin-right: 0;
    margin-left: 1rem;
}

/* Padding adjustments */
html.rtl .pl-4 {
    padding-left: 0;
    padding-right: 1rem;
}

html.rtl .pr-4 {
    padding-right: 0;
    padding-left: 1rem;
}

html.rtl .pl-6 {
    padding-left: 0;
    padding-right: 1.5rem;
}

html.rtl .pr-6 {
    padding-right: 0;
    padding-left: 1.5rem;
}

/* Text alignment */
html.rtl .text-left {
    text-align: right;
}

html.rtl .text-right {
    text-align: left;
}

/* Border adjustments */
html.rtl .border-l {
    border-left: none;
    border-right: 1px solid;
}

html.rtl .border-r {
    border-right: none;
    border-left: 1px solid;
}

html.rtl .border-l-2 {
    border-left: none;
    border-right: 2px solid;
}

html.rtl .border-r-2 {
    border-right: none;
    border-left: 2px solid;
}

html.rtl .border-l-4 {
    border-left: none;
    border-right: 4px solid;
}

html.rtl .border-r-4 {
    border-right: none;
    border-left: 4px solid;
}

/* Rounded corners for RTL */
html.rtl .rounded-l {
    border-radius: 0 0.25rem 0.25rem 0;
}

html.rtl .rounded-r {
    border-radius: 0.25rem 0 0 0.25rem;
}

html.rtl .rounded-l-lg {
    border-radius: 0 0.5rem 0.5rem 0;
}

html.rtl .rounded-r-lg {
    border-radius: 0.5rem 0 0 0.5rem;
}

html.rtl .rounded-l-xl {
    border-radius: 0 0.75rem 0.75rem 0;
}

html.rtl .rounded-r-xl {
    border-radius: 0.75rem 0 0 0.75rem;
}

/* Position adjustments */
html.rtl .left-0 {
    left: auto;
    right: 0;
}

html.rtl .right-0 {
    right: auto;
    left: 0;
}

html.rtl .left-4 {
    left: auto;
    right: 1rem;
}

html.rtl .right-4 {
    right: auto;
    left: 1rem;
}

/* Transform adjustments for icons/arrows */
html.rtl .rotate-180 {
    transform: rotate(0deg);
}

html.rtl .-rotate-90 {
    transform: rotate(90deg);
}

html.rtl .rotate-90 {
    transform: rotate(-90deg);
}

/* Scrollbar position for RTL (Webkit browsers) */
html.rtl ::-webkit-scrollbar {
    direction: rtl;
}

/* Input text alignment */
html.rtl input,
html.rtl textarea,
html.rtl select {
    text-align: right;
}

/* Exclude specific elements that should stay LTR (like numbers, code) */
html.rtl [data-ltr],
html.rtl code,
html.rtl pre,
html.rtl .font-mono {
    direction: ltr;
    text-align: left;
}

/* RTL banner message alignment */
html.rtl [data-no-translate] {
    direction: rtl;
}